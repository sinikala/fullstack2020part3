(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},20:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),u=n.n(a),c=n(13),r=n.n(c),o=(n(20),n(14)),l=n(2),i=function(e){var t=e.person,n=e.handleDeleteButton;return u.a.createElement("div",null,t.name,"  ",t.number,u.a.createElement("button",{onClick:function(){return n(t.id)},style:{marginLeft:"14px"}},"delete"))},s=n(3),f=n.n(s),m="/api/persons",d=function(){return f.a.get(m).then((function(e){return e.data}))},p=function(e){return f.a.post(m,e).then((function(e){return e.data}))},h=function(e){return f.a.delete("".concat(m,"/").concat(e)).then(console.log("deleted!"))},b=function(e,t){return f.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){var t=e.message;return null===t?null:u.a.createElement("div",{className:"notification"},t)},E=function(e){var t=e.message;return null===t?null:u.a.createElement("div",{className:"error"},t)},g=function(e){var t=e.persons,n=e.handleDeleteButton;return u.a.createElement("div",null,u.a.createElement("h2",null,"Numbers"),t.map((function(e,t){return u.a.createElement(i,{key:t,person:e,handleDeleteButton:n})})))},j=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),i=Object(l.a)(r,2),s=i[0],f=i[1],m=Object(a.useState)(""),j=Object(l.a)(m,2),O=j[0],w=j[1],y=Object(a.useState)(""),S=Object(l.a)(y,2),C=S[0],T=S[1],k=Object(a.useState)(""),D=Object(l.a)(k,2),B=D[0],U=D[1],N=Object(a.useState)(!0),x=Object(l.a)(N,2),J=x[0],A=x[1],I=Object(a.useState)(null),L=Object(l.a)(I,2),P=L[0],q=L[1],z=Object(a.useState)(null),F=Object(l.a)(z,2),G=F[0],H=F[1];Object(a.useEffect)((function(){d().then((function(e){c(e)}))}),[]);return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement(v,{message:P}),u.a.createElement(E,{message:G}),"filter with name ",u.a.createElement("input",{value:B,onChange:function(e){e.target.value.length>0?A(!1):A(!0);var t=n.filter((function(t){return t.name.toUpperCase().includes(e.target.value.toUpperCase())}));f(t),U(e.target.value)}}),u.a.createElement("h3",null,"Add an new person"),u.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),n.filter((function(e){return e.name.toUpperCase()===O.toUpperCase()})).length>0)?(window.confirm("".concat(O," is already added to phonebook, replace the the old number with a new one?"))&&function(e){var t=n.find((function(e){return e.name===O})),a=Object(o.a)({},t,{number:C}),u=t.id;b(u,a).then((function(e){c(n.map((function(t){return t.id!==u?t:e}))),q("".concat(a.name," updated"))})).catch((function(e){H("".concat(a.name," has already been deleted from the server")),setTimeout((function(){H(null)}),5e3)})),setTimeout((function(){q(null)}),5e3)}(),w(""),T("")):function(e){var t={name:O,number:C,id:n[n.length-1].id+1};p(t).then((function(e){c(n.concat(e)),q("".concat(O," was added")),w(""),T("")})).catch((function(e){console.log(e.response.data),H("".concat(e.response.data.error)),setTimeout((function(){H(null)}),5e3)})),setTimeout((function(){q(null)}),5e3)}()}},u.a.createElement("div",null,"name: ",u.a.createElement("input",{value:O,onChange:function(e){w(e.target.value)}})," "),u.a.createElement("div",null,"number: ",u.a.createElement("input",{value:C,onChange:function(e){T(e.target.value)}})," ")," ",u.a.createElement("br",null),u.a.createElement("button",{type:"submit"},"add")),u.a.createElement(g,{persons:J?n:s,handleDeleteButton:function(e){var t=n.find((function(t){return t.id===e})).name;window.confirm("Delete ".concat(t,"?"))&&function(e){h(e).then((function(){c(n.filter((function(t){return t.id!==e}))),q("Succesfully deleted")})).catch((function(e){H("The person you are trying to delete was already deleted from server"),setTimeout((function(){H(null)}),5e3)})),setTimeout((function(){q(null)}),5e3)}(e)}}))};r.a.render(u.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.da6a16ba.chunk.js.map